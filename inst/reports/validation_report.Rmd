---
params:
  author: unknown
  title: Validation
  x: NULL
  result: NULL
title: "`r params$title`"
author: "`r params$author`"
date: "`r Sys.Date()`"
output:
  html_document: default
  pdf_document: default
  word_document: default
---


```{r setup, include=FALSE}
library(magrittr)
library(knitr)
knitr::opts_chunk$set(echo = TRUE)
x <- params$x
result <- params$result

## only for debugging ##
if (is.null(x)) {
  if (!require("emeScheme")) {
    devtools::load_all()
  }
  x <- emeScheme::emeScheme_raw
  result <- validate(x = emeScheme_raw, validateData = TRUE, report = "none")
}
## ##
```

* **Author**: `r params$author`
* **emeScheme metadata name**: `r attr(x, "fileName")`
* **data package path**: `add this`

# Overall validation outcome

Here there will be a report on the overall validation outcome, e.g., your metadata-data combination passed x/y critical tests, and passed z/n desirable tests. Please see below for details of each test result.


Put this in an appendix.
```{r info}
attributes(x)
```

Use conditional text to explicitly say pass or fail, so that users don't have to read the R output (or at least get lovely green text for pass, and red for fail!)

# Validate General Structure
```{r val_struct, options}
result$structOK
```


# Validate Experiment
## Types
```{r}
result$Experiment$types %>%
  kable()
```

## Suggested Values
```{r}
result$Experiment$suggestedValues %>%
  kable()
```

# Validate Species
## Types
```{r}
result$Species$types %>%
  kable()
```

## Suggested Values
```{r}
result$Species$suggestedValues %>%
  kable()
```

## Species Names
```{r}
result$Species$speciesNames %>%
  kable()
```

# Validate Treatment
## Types
```{r}
result$Treatment$types %>%
  kable()
```

## Suggested Values
```{r}
result$Treatment$suggestedValues %>%
  kable()
```

# Validate Measurement
## Types
```{r}
result$Measurement$types %>%
  kable()
```

## Suggested Values
```{r}
result$Measurement$suggestedValues %>%
  kable()
```

# Validate DataExtraction
## Types
```{r}
result$DataExtraction$types %>%
  kable()
```

## Suggested Values
```{r}
result$DataExtraction$suggestedValues %>%
  kable()
```

# Validate DataFileMetaData
## Types
```{r}
result$DataFileMetaData$types %>%
  kable()
```

## Suggested Values
```{r}
result$DataFileMetaData$suggestedValues %>%
  kable()
```

## Validate mappingColumn

## Validation out of attempt to parse date variables

# To do

